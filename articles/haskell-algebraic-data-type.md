---
title: "[Haskell]ï¼šä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹"
emoji: "ğŸ““"
type: "tech"
topics: ["haskell", "åˆå¿ƒè€…", "memo", "å­¦ç¿’ãƒ¡ãƒ¢"]
published: false
---

## ã¯ã˜ã‚ã«

ãƒ¢ãƒŠãƒ‰ã‚’ç†è§£ã™ã‚‹ãŸã‚ã®ã€ãƒ•ã‚¡ãƒ³ã‚¯ã‚¿ã‚’ç†è§£ã™ã‚‹ãŸã‚ã«ã€ä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹ã‚„å‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€èª¿æŸ»ã—ãŸã€‚

## ä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹ã¨ã¯

ä»¥ä¸‹ã®ï¼’ã¤ã®å‹ã‚’çµ„ã¿åˆã‚ã›ãŸã‚‚ã®ã§ã‚ã‚‹ã€‚

- è¤‡æ•°ã®å‹ã‚’åˆã‚ã›ã¦ã€æ–°ã—ãä½œæˆã—ãŸå‹ï¼ˆç›´ç©å‹ï¼‰
- è¤‡æ•°ã®å‹ã‚’åˆã‚ã›ã¦ã€ã„ãšã‚Œã‹ï¼‘ã¤ã®å‹ã‚’æŒã¤å‹ï¼ˆç›´å’Œå‹ï¼‰

## ä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹ã®å®šç¾©

ä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹ã®åŸºæœ¬çš„ãªå®šç¾©ã¯ã€ä»¥ä¸‹ã«ãªã‚‹ã€‚

```haskell
data å‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼ˆå‹åï¼‰ å‹å¤‰æ•° = å€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿
```

## å‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¨å€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿

### å‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿

å‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ã€å‹ã‚’å—ã‘å–ã‚Šã€æ–°ã—ã„å‹ã‚’è¿”ã™ã€‚
å‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ã€0 å€‹ä»¥ä¸Šã®å¼•æ•°ã‚’å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

#### ä¾‹

```haskell
-- å¼•æ•°ãªã—ï¼ˆå…·ä½“å‹ï¼‰
data Bool = False | True
--   ^^^^ å‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿

data Color = Red | Green | Blue
--   ^^^^^ å‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿

-- å¼•æ•°1ã¤
data Maybe a = Nothing | Just a
--   ^^^^^ å‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼ˆ1å¼•æ•°ï¼‰

data Box a = Box a
--   ^^^ å‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼ˆ1å¼•æ•°ï¼‰

-- å¼•æ•°2ã¤
data Either a b = Left a | Right b
--   ^^^^^^ å‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼ˆ2å¼•æ•°ï¼‰

data Pair a b = Pair a b
--   ^^^^ å‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼ˆ2å¼•æ•°ï¼‰

data First a b = First a
--   ^^^^^ å‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼ˆ2å¼•æ•°ï¼‰
```

### å€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼ˆãƒ‡ãƒ¼ã‚¿ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼‰

å€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ã€å€¤ã‚’å—ã‘å–ã‚Šã€æ–°ã—ã„å€¤ã‚’è¿”ã™ã€‚
å€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ã€0 å€‹ä»¥ä¸Šã®å¼•æ•°ã‚’å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
ã¾ãŸã€å€¤ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦ã€ä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹ã«ã‚¿ã‚°ã‚’ä»˜ã‘ã‚‹ã€‚
å¼•æ•°ã‚’å—ã‘å–ã‚‰ãªã„ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ã€å®šæ•°ã‚„ç©ºã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¨å‘¼ã°ã‚Œã‚‹ï¼Ÿ

#### ä¾‹

```haskell
-- å¼•æ•°ï¼šãªã—
-- Redã€Blueã€GreenãŒå€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«è©²å½“
data Color = Red | Blue | Green
--   ^^^^^ å‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿
--           ^^^ ^^^^ ^^^^^ å€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼ˆå¼•æ•°ãªã—ï¼‰

-- å¼•æ•°ï¼šã‚ã‚Š
-- ä»¥ä¸‹ãŒå€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿
-- Circle Int
-- Rect Int Int
-- Triangle Int Int
data Shape = Circle Int | Square Int | Triangle Int Int
--   ^^^^^ å‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿
--           ^^^^^^ å€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼ˆInt -> Shapeï¼‰
--                        ^^^^^^ å€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼ˆInt -> Shapeï¼‰
--                                      ^^^^^^^^ å€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼ˆInt -> Int -> Shapeï¼‰
```

#### é–¢æ•°ã¨ã—ã¦æ‰±ã†

å€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ã€é–¢æ•°ã¨ã—ã¦æ‰±ã†ã“ã¨ãŒã§ãã‚‹ã€‚

```haskell
data Shape = Circle Int | Square Int | Triangle Int Int deriving Show

sides:: [Int]
sides = [2,4,6]
squares :: [Shape]
squares = map Square sides

main = do
    print squares -- [Square 2,Square 4,Square 6]

```

### ç›´ç©å‹

#### ä¾‹

```haskell
data Point = Point Int Int
```

### ç›´å’Œå‹

#### ä¾‹

```haskell
data DayOfWeek = Mon | Tue | Wed | Thu | Fri | Sat | Sun
```

### ç›´ç© + ç›´å’Œ

```haskell
data Shape = Rectangle Int Int
```

## ã‚«ã‚¤ãƒ³ãƒ‰ï¼ˆç¨®ï¼‰

ã‚«ã‚¤ãƒ³ãƒ‰ã¨ã¯ã€å¤§é›‘æŠŠã«ã„ã†ã¨ã€Œ**å‹ã®åˆ†é¡**ã€ã§ã™ã€‚  
haskell ã®ã‚«ã‚¤ãƒ³ãƒ‰ã«ã¯ã€ä»¥ä¸‹ã® 2 ã¤ã®è¦å‰‡ãŒã‚ã‚‹ã€‚

- 1. ï¼ˆAï¼‰`*`ã¯ã€å…¨ã¦ã®**ãƒ‡ãƒ¼ã‚¿å‹**ï¼ˆå€¤ã‚’æŒã¤ã“ã¨ã®ã§ãã‚‹ï¼‰ã®ã‚«ã‚¤ãƒ³ãƒ‰ã§ã‚ã‚‹ã€‚
- 2. ï¼ˆBï¼‰`k1 -> k2` ã¯ã€k1 ã®ã‚«ã‚¤ãƒ³ãƒ‰ã‚’æŒã¤å‹ã‚’å—ã‘å–ã‚Šã€k2 ã®ã‚«ã‚¤ãƒ³ãƒ‰ã®å‹ã‚’ç”Ÿæˆã™ã‚‹ã€‚

:::message
GHC 8 ä»¥é™ã¯ã€ä»¥ä¸‹ã®ç†ç”±ã‹ã‚‰ã€ã‚«ã‚¤ãƒ³ãƒ‰ã‚’è¡¨ã™éš›ã«ã€`*`ã§ã¯ãªã`Type`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚

ä¸»ãªç†ç”±

- å‹ãƒ¬ãƒ™ãƒ«ã§ã®ä¹—ç®—ã®æ¼”ç®—å­`*`ã¨ç«¶åˆã™ã‚‹
- é …ã¨å‹ã‚’çµ±ä¸€ã™ã‚‹éš›ã«æ”¯éšœãŒã‚ã‚‹
- å¯èª­æ€§ã®å•é¡Œ(`*`ã¯ã€ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã‚„ Markdown ã®ç®‡æ¡æ›¸ããªã©ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãŸã‚)ãªã©

å‚è€ƒ
[GHC Proposal #143](https://ghc-proposals.readthedocs.io/en/latest/proposals/0143-remove-star-kind.html)
:::

kind ã¯`:k`ã¾ãŸã¯`:kind`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ç¢ºèªã§ãã‚‹ã€‚

### å…·ä½“ä¾‹

#### (1) å‹ã‚’å—ã‘å–ã‚‰ãªã„å‹ï¼ˆå…·ä½“å‹ï¼‰

`Int`ã‚„`String`ãªã©ã€å‹å¼•æ•°ãŒãªã„ã€å€¤ã‚’æŒã¦ã‚‹**å…·ä½“å‹**ã¯ã€ã‚«ã‚¤ãƒ³ãƒ‰ãŒ `*` ã«ãªã‚‹ã€‚

```haskell
ghci> :k Int
Int :: *

ghci> :k String
String :: *
```

#### (2)å‹å¼•æ•°ã‚’å—ã‘å–ã‚‹å‹

`Maybe`ã‚„`[]`ãªã©ã€å‹å¼•æ•°ã‚’å—ã‘å–ã‚‹å‹ã¯ã€`* -> *`ã®ã‚ˆã†ãªã‚«ã‚¤ãƒ³ãƒ‰ã«ãªã‚‹ã€‚

```haskell
ghci> :k Maybe
Maybe :: * -> * -- 1ã¤ã®å‹ã‚’å—ã‘å–ã‚‹

ghci> :k []
[] :: * -> * -- 1ã¤ã®å‹ã‚’å—ã‘å–ã‚‹

ghci> :k Either
Either :: * -> * -> *  -- 2ã¤ã®å‹ã‚’å—ã‘å–ã‚‹
```

https://ja.wikipedia.org/wiki/%E3%82%AB%E3%82%A4%E3%83%B3%E3%83%89_(%E5%9E%8B%E7%90%86%E8%AB%96)

## å‚è€ƒ

https://wiki.haskell.org/Constructor#Type_constructor
https://haskell.jp/blog/posts/2020/how-to-use-type-newtype-data.html
http://walk.northcol.org/haskell/adts/
https://qiita.com/7shi/items/1ce76bde464b4a55c143
https://qiita.com/tobita_yoshiki/items/a2ffd2cefa53376338c6
https://zenn.dev/mod_poppo/books/haskell-type-level-programming/viewer/types-and-kinds
https://ja.wikipedia.org/wiki/%E3%82%AB%E3%82%A4%E3%83%B3%E3%83%89_(%E5%9E%8B%E7%90%86%E8%AB%96)

https://ghc.gitlab.haskell.org/ghc/doc/users_guide/exts/poly_kinds.html#overview-of-type-in-type
https://zenn.dev/mod_poppo/books/haskell-type-level-programming/viewer/types-and-kinds
https://ghc.gitlab.haskell.org/ghc/doc/users_guide/exts/poly_kinds.html#the-kind-type
